

<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Tracing (APM)</title>
    

    <meta itemprop="description" name="description" property="og:description" content="" />

    <link href="//fonts.googleapis.com/css?family=Open+Sans:700" rel="stylesheet" type="text/css">
    <link href="/static/css/bootstrap3-cbdde23cd71.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/tipuesearch.css">
    <link href="/static/css/style-cba6fad8d5d.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/pygments.css" media="screen">


    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>


    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-21102638-5']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <script src="https://use.fontawesome.com/700fac0342.js"></script>
    
  </head>

  <body>
    <!-- HEADER -->
<div class="navbar navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#topmenu" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand " href="/">
        <img src="/static/dd_docs_logo.png">
      </a>
    </div>
    <div class="collapse navbar-collapse" id="topmenu">
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Guides <span class="caret"></span></a>
          <ul class="dropdown-menu">
          
            
              <li>
                <a href="/guides/basic_agent_usage/">Getting Started with the Agent</a>
              </li>
              
              <li>
                <a href="/guides/overview/">Datadog Overview</a>
              </li>
              
              <li>
                <a href="/guides/hostmap/">Host Map Overview</a>
              </li>
              
              <li>
                <a href="/guides/integration_sdk/">Creating New Integrations</a>
              </li>
              
              <li>
                <a href="/guides/installcoreextra/">Installing Core & Extra Integrations</a>
              </li>
              
              <li>
                <a href="/guides/eventcorrelation/">Correlating Events with Metrics</a>
              </li>
              
              <li>
                <a href="/guides/metrics/">Sending Metrics with DogStatsD</a>
              </li>
              
              <li>
                <a href="/guides/logs/">Log Parsing in the Agent</a>
              </li>
              
              <li>
                <a href="/guides/testing/">Testing Integrations</a>
              </li>
              
              <li>
                <a href="/guides/agent_checks/">Writing an Agent Check</a>
              </li>
              
              <li>
                <a href="/guides/chef/">Deploying the Agent with Chef</a>
              </li>
              
              <li>
                <a href="/guides/azure/">Deploying the Datadog Agent to Azure</a>
              </li>
              
              <li>
                <a href="/guides/monitors/">Guide to Monitors</a>
              </li>
              
              <li>
                <a href="/guides/composite_monitors/">Guide to Composite Monitors</a>
              </li>
              
              <li>
                <a href="/guides/markdown/">Using Markdown in Datadog events</a>
              </li>
              
              <li>
                <a href="/guides/autodiscovery/">Guide to using Autodiscovery with Docker</a>
              </li>
              
              <li>
                <a href="/guides/tagging/">Guide to Tagging</a>
              </li>
              
              <li>
                <a href="/guides/templating/">Guide to Dashboard Templating</a>
              </li>
              
              <li>
                <a href="/guides/saml/">Single Sign On With SAML</a>
              </li>
              
              <li>
                <a href="/guides/eventsemail/">Events via Email</a>
              </li>
              
              <li>
                <a href="/guides/new_integration/">Officially Integrating with Datadog</a>
              </li>
              
              <li>
                <a href="/guides/anomalies/">Anomaly Detection</a>
              </li>
              
              <li>
                <a href="/guides/outliers/">Outlier Detection</a>
              </li>
              
              <li>
                <a href="/guides/multiaccountorg/">Configuring Teams & Organizations with Multiple Accounts</a>
              </li>
              
          </ul>
        </li>
        <li class="dropdown">
          <a id="nav-reference-dropdown" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">References <b class="caret"></b></a>
          <ul class="dropdown-menu dropdown-menu-left" role="menu" aria-labelledby="nav-guide-dropdown">
            <li><a href="/api/">API</a></li>
            <li><a href="/tracing/">Tracing (APM)</a></li>
            <li><a href="/libraries/">Libraries</a></li>
            <li><a href="/monitoring/">Monitoring</a></li>
            <li><a href="/graphing/">Graphing</a></li>
            <li><a href="/graphingjson/">Graphing using JSON</a></li>
            <li><a href="/hostnames/">Host Names</a></li>
            <li><a href="/integrations/">Integrations</a></li>
            <li><a href="/guides/dogstatsd/">DogStatsD</a></li>
            <li><a href="/examples/">Examples</a></li>
            <li><a href="/videos/">Videos</a></li>
            <li><a href="/guides/billing/">Billing</a></li>
            <li><a href="/faq/">FAQ</a></li>
          </ul>
        </li>
        
        <li class="hidden-sm hidden-md hidden-lg">
          <form class="navbar-form navbar-left" role="search" action="/search/">
            <div class="form-group">
              <input type="text" name="q" id="tipue_search_input" required class="form-control" placeholder="Search">
            </div>
          </form>
        </li>
        
        <li><a href="/help/">Help</a></li>
        <li id="signin">
          <a class="btn navbar-btn flexbutton blueflex" href="https://app.datadoghq.com/signup">Free Trial</a>
        </li>
        <li id="signup">
          <a class="btn navbar-btn flexbutton" href="https://help.datadoghq.com/hc/en-us/signin?return_to=https%3A%2F%2Fhelp.datadoghq.com%2Fhc%2Fen-us&locale=1">Support Login</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<!-- END HEADER -->

    <div class="container">
      <div class="row">
      
        <!-- SIDEBAR -->
        <div class="col-sm-3 col-md-3 hidden-xs hidden-print" id="sidebarcolumn">
          <ul class="nav nav-tabs nav-stacked sidebar">
          
            <li class="nav-header">Documentation Search</li>
            <li>
              <form action="/search/">
                <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
              </form>
            </li>
            
            <li class='nav-header'>Table of Contents</li><li><a style='' href='#overview' onclick="$('#').collapse('show')">
Overview</a></li><li><a style='' href='#getting-started' onclick="$('#').collapse('show')">
Getting started</a></li><li><a style='padding: 5px 25px;' href='#installing-the-agent' onclick="$('#').collapse('show')">
Installing the agent</a></li><li><a style='padding: 5px 25px;' href='#running-the-agent-in-docker' onclick="$('#').collapse('show')">
Running the agent in Docker</a></li><li><a style='padding: 5px 25px;' href='#instrument-your-application' onclick="$('#').collapse('show')">
Instrument your application</a></li><li><a style='' href='#configuration' onclick="$('#').collapse('show')">
Configuration</a></li><li><a style='' href='#additional-resources' onclick="$('#').collapse('show')">
Additional resources</a></li>
            
                        <li class="nav-header">Tracing (APM)</li>
          <li><a href='/tracing/'>Installation & Configuration</a></li>
          <li><a href='/tracing/terminology'>Terminology</a></li>
          <li><a href='/tracing/faq'>Frequently Asked Questions</a></li>
          <li class="nav-header">Supported Languages</li>
          <li><a href='/tracing/go'>Go</a></li>
          <li><a href='/tracing/python'>Python</a></li>
          <li><a href='/tracing/ruby'>Ruby</a></li>
          <li><a href='/tracing/api'>Tracing API</a></li>

            
            
          </ul>
        &nbsp;
        </div>
        <!-- END SIDEBAR -->
        
        <!-- MAIN -->
        <div class="col-xs-12 col-sm-9 col-md-9 main">
          <!-- PAGE TITLE -->
          
          <h1 id="pagetitle">Tracing (APM) </h1>
          
          
          <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h3 id="overview" class="linked-header">
<a class="header-link" href="#overview"><i class="fa fa-link"></i></a>Overview</h3>

<p>Datadog’s integrated APM tool eliminates the traditional separation between infrastructure and application performance monitoring. This not only provides greater visibility, but allows you to see the relationship between application code and the underlying infrastructure.</p>

<h3 id="getting-started" class="linked-header">
<a class="header-link" href="#getting-started"><i class="fa fa-link"></i></a>Getting started</h3>

<p>The Datadog APM is included in our Enterprise plan or as an upgrade to our Pro plan. Pro plan members can visit the <a href="https://app.datadoghq.com/trace/home">APM page of the Datadog app</a> to begin a free 14-day trial.</p>

<p>Currently, tracing is only supported by version 5.11.0 (or above) of the Datadog Agent running on Linux and Docker.</p>

<h4 id="installing-the-agent" class="linked-header">
<a class="header-link" href="#installing-the-agent"><i class="fa fa-link"></i></a>Installing the agent</h4>

<p>With our infrastructure monitoring, metrics are sent to the Datadog Agent, which then forwards them to Datadog. Similarly, tracing metrics are also sent to the Datadog agent. To enable tracing:</p>

<ol>
  <li>Install the latest <a href="https://app.datadoghq.com/account/settings#agent">Datadog Agent</a> (version 5.11.0 or above is required).</li>
  <li>
    <p>Enable the APM in the Datadog Agent configuration file</p>

    <pre><code>[Main]
# Enable the trace agent.
apm_enabled: true
</code></pre>
  </li>
  <li><a href="/guides/basic_agent_usage/">Restart the Agent</a></li>
</ol>

<h4 id="running-the-agent-in-docker" class="linked-header">
<a class="header-link" href="#running-the-agent-in-docker"><i class="fa fa-link"></i></a>Running the agent in Docker</h4>

<p>To trace applications in Docker containers, you can use the <a href="https://hub.docker.com/r/datadog/docker-dd-agent/">docker-dd-agent</a> image (tagged version 11.0.5110 or higher)and enable tracing by passing <code>DD_APM_ENABLED=true</code> as an environment variable.</p>

<p>For additional information, please reference <a href="https://github.com/DataDog/docker-dd-agent/blob/master/README.md#tracing--apm">the project README on Github</a></p>

<h4 id="instrument-your-application" class="linked-header">
<a class="header-link" href="#instrument-your-application"><i class="fa fa-link"></i></a>Instrument your application</h4>

<p>To instrument your application, please select one of the following supported languages.</p>

<ul>
  <li><a href="/tracing/go">Go</a></li>
  <li><a href="/tracing/python">Python</a></li>
  <li><a href="/tracing/ruby">Ruby</a></li>
</ul>

<p>To instrument an application written in a language that does not yet have official library support, please reference the <a href="/tracing/api">Tracing API</a>.</p>

<h3 id="configuration" class="linked-header">
<a class="header-link" href="#configuration"><i class="fa fa-link"></i></a>Configuration</h3>

<p>The Datadog Agent uses the <code>/etc/dd-agent/datadog.conf</code> file for both infrastructure monitoring and APM configuration options. Additionally, some configuration options may be set as environment variables. Note that options set as environment variables will override the settings defined in the configuration file.</p>

<table class="table">
  <thead>
    <tr>
      <th>File setting</th>
      <th>Env variable</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>main</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code>apm_enabled</code></td>
      <td><code>DD_APM_ENABLED</code></td>
      <td>The Datadog Agent will accept trace metrics when the value is set to <code>true</code>. The default value is <code>false</code>.</td>
    </tr>
    <tr>
      <td><strong>trace.sampler</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code>extra_sample_rate</code></td>
      <td>-</td>
      <td>Use this setting to adjust the trace sample rate. The value should be a float between <code>0</code> (no sampling) and <code>1</code> (normal sampling rate). The default value is <code>1</code>
</td>
    </tr>
    <tr>
      <td><code>max_traces_per_second</code></td>
      <td>-</td>
      <td>The maximum number of traces to sample per second. To disable the limit (<em>not recommended</em>), set to <code>0</code>. The default value is <code>10</code>.</td>
    </tr>
    <tr>
      <td><strong>trace.receiver</strong></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code>receiver_port</code></td>
      <td><code>DD_RECEIVER_PORT</code></td>
      <td>The port that the Datadog Agent’s trace receiver should listen on. The default value is <code>8126</code>.</td>
    </tr>
    <tr>
      <td><code>connection_limit</code></td>
      <td>-</td>
      <td>The number of unique client connections to allow during one 30 second lease period. The default value is <code>2000</code>.</td>
    </tr>
  </tbody>
</table>

<p>For more information about the Datadog Agent, see the <a href="/guides/basic_agent_usage/">Getting Started guide</a> or refer to the <a href="https://github.com/DataDog/dd-agent/blob/master/datadog.conf.example"><code>datadog.conf.example</code> file</a>.</p>

<h3 id="additional-resources" class="linked-header">
<a class="header-link" href="#additional-resources"><i class="fa fa-link"></i></a>Additional resources</h3>

<p>For additional help from Datadog staff and other Datadog community members, join the <a href="https://datadoghq.slack.com/messages/apm"><em>apm</em> channel</a> in our Datadog Slack. Visit <a href="http://chat.datadoghq.com">http://chat.datadoghq.com</a> to join the Slack. We maintain a list of <a href="http://docs.datadoghq.com/libraries/#community-tracing-apm-libraries">community tracing libraries</a>.</p>

<p>You can also reach our APM team via email at <a href="mailto:tracehelp@datadoghq.com">tracehelp@datadoghq.com</a>.</p>
</body></html>


          
        </div>
      </div>
    </div>
    <div class="container">
  <div class="row" id="footer">
    <div class=".col-md-12">Need some help?  <a href="/help/">Get in touch.</a> &bull; Mistake in the docs? <a href="https://github.com/DataDog/documentation/issues">Let us know.</a></div>
    <div class=".col-md-12"><a href="/ja">日本語ドキュメントへのリンク。</a></div>
    <div class=".col-md-12">&copy; Datadog, Inc. All rights reserved.</div>
  </div>
</div>

    

        <script type="text/javascript">
      ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];
      p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)
      };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;
      n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","https://don08600y3gfm.cloudfront.net/ps3b/static/js/plow232.js","snowplow"));
      window.snowplow('newTracker', 'co', 'collector.datadoghq.com', { // Initialise a tracker
      appId: 'datadog', // Application ID. Make sure you use the same value across all the tags you fire on your trial
      platform: 'web',
      cookieDomain: '.datadoghq.com',
      contexts: {
        performanceTiming: true,
        webPage: true
        }
      });
      window.snowplow('enableActivityTracking', 5, 5); // Ping every 30 seconds after 30 seconds
      window.snowplow('enableLinkClickTracking');
      window.snowplow('trackPageView');
    </script>

        <script type="text/javascript">
      (function() {
       var didInit = false;
       function initMunchkin() {
         if(didInit === false) {
           didInit = true;
           Munchkin.init('875-UVY-685');
         }
       }
       var s = document.createElement('script');
       s.type = 'text/javascript';
       s.async = true;
       s.src = '//munchkin.marketo.net/munchkin.js';
       s.onreadystatechange = function() {
         if (this.readyState == 'complete' || this.readyState == 'loaded') {
           initMunchkin();
         }
       };
       s.onload = initMunchkin;
       document.getElementsByTagName('head')[0].appendChild(s);
      })();
    </script>


    <!-- <script src="/static/jquery-1.7.2.min.js"></script> -->
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch-set.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch_content.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch.js"></script>
<script src="/static/datadog-docs.js"></script>


    <!-- No page Javascript -->
  </body>
</html>


