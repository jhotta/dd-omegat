

<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Tracing API</title>
    

    <meta itemprop="description" name="description" property="og:description" content="" />

    <link href="//fonts.googleapis.com/css?family=Open+Sans:700" rel="stylesheet" type="text/css">
    <link href="/static/css/bootstrap3-cbdde23cd71.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/tipuesearch.css">
    <link href="/static/css/style-cba6fad8d5d.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/pygments.css" media="screen">


    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>


    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-21102638-5']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <script src="https://use.fontawesome.com/700fac0342.js"></script>
    
  </head>

  <body>
    <!-- HEADER -->
<div class="navbar navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#topmenu" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand " href="/">
        <img src="/static/dd_docs_logo.png">
      </a>
    </div>
    <div class="collapse navbar-collapse" id="topmenu">
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Guides <span class="caret"></span></a>
          <ul class="dropdown-menu">
          
            
              <li>
                <a href="/guides/basic_agent_usage/">Getting Started with the Agent</a>
              </li>
              
              <li>
                <a href="/guides/overview/">Datadog Overview</a>
              </li>
              
              <li>
                <a href="/guides/hostmap/">Host Map Overview</a>
              </li>
              
              <li>
                <a href="/guides/integration_sdk/">Creating New Integrations</a>
              </li>
              
              <li>
                <a href="/guides/installcoreextra/">Installing Core & Extra Integrations</a>
              </li>
              
              <li>
                <a href="/guides/eventcorrelation/">Correlating Events with Metrics</a>
              </li>
              
              <li>
                <a href="/guides/metrics/">Sending Metrics with DogStatsD</a>
              </li>
              
              <li>
                <a href="/guides/logs/">Log Parsing in the Agent</a>
              </li>
              
              <li>
                <a href="/guides/testing/">Testing Integrations</a>
              </li>
              
              <li>
                <a href="/guides/agent_checks/">Writing an Agent Check</a>
              </li>
              
              <li>
                <a href="/guides/chef/">Deploying the Agent with Chef</a>
              </li>
              
              <li>
                <a href="/guides/azure/">Deploying the Datadog Agent to Azure</a>
              </li>
              
              <li>
                <a href="/guides/monitors/">Guide to Monitors</a>
              </li>
              
              <li>
                <a href="/guides/composite_monitors/">Guide to Composite Monitors</a>
              </li>
              
              <li>
                <a href="/guides/markdown/">Using Markdown in Datadog events</a>
              </li>
              
              <li>
                <a href="/guides/autodiscovery/">Guide to using Autodiscovery with Docker</a>
              </li>
              
              <li>
                <a href="/guides/tagging/">Guide to Tagging</a>
              </li>
              
              <li>
                <a href="/guides/templating/">Guide to Dashboard Templating</a>
              </li>
              
              <li>
                <a href="/guides/saml/">Single Sign On With SAML</a>
              </li>
              
              <li>
                <a href="/guides/eventsemail/">Events via Email</a>
              </li>
              
              <li>
                <a href="/guides/new_integration/">Officially Integrating with Datadog</a>
              </li>
              
              <li>
                <a href="/guides/anomalies/">Anomaly Detection</a>
              </li>
              
              <li>
                <a href="/guides/outliers/">Outlier Detection</a>
              </li>
              
              <li>
                <a href="/guides/multiaccountorg/">Configuring Teams & Organizations with Multiple Accounts</a>
              </li>
              
          </ul>
        </li>
        <li class="dropdown">
          <a id="nav-reference-dropdown" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">References <b class="caret"></b></a>
          <ul class="dropdown-menu dropdown-menu-left" role="menu" aria-labelledby="nav-guide-dropdown">
            <li><a href="/api/">API</a></li>
            <li><a href="/tracing/">Tracing (APM)</a></li>
            <li><a href="/libraries/">Libraries</a></li>
            <li><a href="/monitoring/">Monitoring</a></li>
            <li><a href="/graphing/">Graphing</a></li>
            <li><a href="/graphingjson/">Graphing using JSON</a></li>
            <li><a href="/hostnames/">Host Names</a></li>
            <li><a href="/integrations/">Integrations</a></li>
            <li><a href="/guides/dogstatsd/">DogStatsD</a></li>
            <li><a href="/examples/">Examples</a></li>
            <li><a href="/videos/">Videos</a></li>
            <li><a href="/guides/billing/">Billing</a></li>
            <li><a href="/faq/">FAQ</a></li>
          </ul>
        </li>
        
        <li class="hidden-sm hidden-md hidden-lg">
          <form class="navbar-form navbar-left" role="search" action="/search/">
            <div class="form-group">
              <input type="text" name="q" id="tipue_search_input" required class="form-control" placeholder="Search">
            </div>
          </form>
        </li>
        
        <li><a href="/help/">Help</a></li>
        <li id="signin">
          <a class="btn navbar-btn flexbutton blueflex" href="https://app.datadoghq.com/signup">Free Trial</a>
        </li>
        <li id="signup">
          <a class="btn navbar-btn flexbutton" href="https://help.datadoghq.com/hc/en-us/signin?return_to=https%3A%2F%2Fhelp.datadoghq.com%2Fhc%2Fen-us&locale=1">Support Login</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<!-- END HEADER -->

    <div class="container">
      <div class="row">
      
        <!-- MAIN -->
        <div class="col-xs-12 col-sm-9 col-md-9 main">
          <!-- PAGE TITLE -->
          
          
          
<h3 id="overview">Overview</h3>

<p>Datadog’s APM allows you to collect performance metrics by tracing your code to determine which parts of your application are slow or inefficient.</p>

<p>Tracing data is sent to the Datadog Agent via an HTTP API. We provide some <a href="/tracing/#instrument-your-application">official libraries</a> that simplify sending metrics to the Datadog Agent, however you may want to interact directly with the API to instrument applications that cannot use the libraries or are written in languages that don’t yet have an official Datadog Tracing library.</p>

<h3 id="api">API</h3>

<!--div class="btn-toolbar">
  <div class="btn-group language-links btn-group-sm">
    <div lang="console" class="active lang-btn btn btn-default gradient">Shell</div>
    <div lang="python" class="lang-btn btn btn-default gradient">Python</div>
    <div lang="ruby" class="lang-btn btn btn-default gradient">Ruby</div>
    <div lang="golang" class="lang-btn btn btn-default gradient">Go</div>
  </div>
</div-->

<h4 id="traces" class="tracing-api">Traces</h4>

<div class="row">
  <div class="col-xs-12 col-md-6 api-left tracing-api">
    <h5>Arguments</h5>
    <ul class="arguments">
          <li>
      <strong>traces [required]</strong>
      <div>A list of traces. Traces are a list of spans as JSON objects containing the span information:
        <ul>
          <li><code>trace_id</code> - <em>Required.</em> The unique integer (64-bit unsigned) ID of the trace containing this span.</li>
          <li><code>span_id</code> - <em>Required.</em> The span integer (64-bit unsigned) ID.</li>
          <li><code>name</code> - <em>Required.</em> The span name.</li>
          <li><code>resource</code> - <em>Required.</em> The resource you are tracing.</li>
          <li><code>service</code> - <em>Required.</em>The service name.</li>
          <li><code>type</code> - <em>Required.</em> The type of request.</li>
          <li><code>start</code> - <em>Required.</em> The start time of the request in nanoseconds from the unix epoch.</li>
          <li><code>duration</code> - <em>Required.</em> The duration of the request in nanoseconds.</li>
          <li><code>parent_id</code> - <em>Optional.</em> The span integer ID of the parent span.</li>
          <li><code>error</code> - <em>Optional.</em> Set this value to 1 to indicate if an error occured. If an error occurs, you should pass additional information, such as the error message, type and stack information in the <code>meta</code> property.</li>
          <li><code>meta</code> - <em>Optional.</em> A dictionary of key-value metadata. e.g. tags.</li>
        </ul>
      </div>
    </li>

    </ul>

    Note: You may send multiple spans within a trace array and each span within a trace should use the same trace_id. You may also send multiple traces.

    <h5>Response</h5>

    The Agent will return a 200 status code and the text "OK" if the traces were successfully delivered. If delivery fails, a 500 status code and an error message will be returned. Note that successful delivery does <em>not</em> mean the traces are accepted. Traces may be dropped after successful delivery. For more information about your traces, please refer to your agent log.

  </div>

  <div class="col-xs-12 col-md-6 api-right tracing-api">
    <h5>Signature</h5>
    <code>PUT /v0.3/traces</code>

    <h5>Example Request</h5>
    
      <pre class="code-block code-block-console" lang="console"><code class="">#!/bin/bash

# Create IDs.
TRACE_ID=($RANDOM % 1000000)
SPAN_ID=($RANDOM % 1000000)

# Start a timer.
START=$(date +%s%N)

# Do things...
sleep 2

# Stop the timer.
DURATION=$(($(date +%s%N) - $START))

# Send the traces.
curl -X PUT -H "Content-type: application/json" \
  -d "[[{
    \"trace_id\": $TRACE_ID,
    \"span_id\": $SPAN_ID,
    \"name\": \"span_name\",
    \"resource\": \"/home\",
    \"service\": \"service_name\",
    \"type\": \"web\",
    \"start\": $START,
    \"duration\": $DURATION
  }]]" \
  http://localhost:8126/v0.3/traces
</code></pre>
    

    <h5>Example Response</h5>
    
      <pre class="code-block code-block-console" lang="console"><code class="">OK
</code></pre>
    
  </div>
</div>

<h4 id="services" class="tracing-api">Services</h4>

<div class="row">
  <div class="col-xs-12 col-md-6 api-left tracing-api">
    <h5>Arguments</h5>
    <ul class="arguments">
          <li>
      <strong>service [required]</strong>
      <div>A service as a JSON object containing the service name mapped to application and application type information:
        <ul>
          <li><code>service</code> - <em>Required.</em>The service name as a dictionary key.</li>
          <li><code>app</code> - <em>Required.</em> The name of the application.</li>
          <li><code>app_type</code> - <em>Required.</em> The type of application.</li>
        </ul>
      </div>
    </li>

    </ul>

    <h5>Response</h5>

    The Agent will return a 200 status code and the text "OK" if the service was successfully delivered. If delivery fails, a 500 status code and an error message will be returned. For more information about your service, please refer to your agent log.

  </div>

  <div class="col-xs-12 col-md-6 api-right tracing-api">
    <h5>Signature</h5>
    <code>PUT /v0.3/services</code>

    <h5>Example Request</h5>
    
      <pre class="code-block code-block-console" lang="console"><code class="">#!/bin/bash

# Send the service.
curl -X PUT -H "Content-type: application/json" \
  -d "{
    \"service_name\": {
      \"app\": \"my-app\",
      \"app_type\": \"web\"
    }
  }" \
  http://localhost:8126/v0.3/services
</code></pre>
    

    <h5>Example Response</h5>
    
      <pre class="code-block code-block-console" lang="console"><code class="">OK
</code></pre>
    
  </div>
</div>



          
        </div>
      </div>
    </div>
    <div class="container">
  <div class="row" id="footer">
    <div class=".col-md-12">Need some help?  <a href="/help/">Get in touch.</a> &bull; Mistake in the docs? <a href="https://github.com/DataDog/documentation/issues">Let us know.</a></div>
    <div class=".col-md-12"><a href="/ja">日本語ドキュメントへのリンク。</a></div>
    <div class=".col-md-12">&copy; Datadog, Inc. All rights reserved.</div>
  </div>
</div>

    

        <script type="text/javascript">
      ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];
      p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)
      };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;
      n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","https://don08600y3gfm.cloudfront.net/ps3b/static/js/plow232.js","snowplow"));
      window.snowplow('newTracker', 'co', 'collector.datadoghq.com', { // Initialise a tracker
      appId: 'datadog', // Application ID. Make sure you use the same value across all the tags you fire on your trial
      platform: 'web',
      cookieDomain: '.datadoghq.com',
      contexts: {
        performanceTiming: true,
        webPage: true
        }
      });
      window.snowplow('enableActivityTracking', 5, 5); // Ping every 30 seconds after 30 seconds
      window.snowplow('enableLinkClickTracking');
      window.snowplow('trackPageView');
    </script>

        <script type="text/javascript">
      (function() {
       var didInit = false;
       function initMunchkin() {
         if(didInit === false) {
           didInit = true;
           Munchkin.init('875-UVY-685');
         }
       }
       var s = document.createElement('script');
       s.type = 'text/javascript';
       s.async = true;
       s.src = '//munchkin.marketo.net/munchkin.js';
       s.onreadystatechange = function() {
         if (this.readyState == 'complete' || this.readyState == 'loaded') {
           initMunchkin();
         }
       };
       s.onload = initMunchkin;
       document.getElementsByTagName('head')[0].appendChild(s);
      })();
    </script>


    <!-- <script src="/static/jquery-1.7.2.min.js"></script> -->
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch-set.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch_content.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch.js"></script>
<script src="/static/datadog-docs.js"></script>


    
  <script type="text/javascript">
    $(DD_docs.apiPage);

  </script>

  </body>
</html>


