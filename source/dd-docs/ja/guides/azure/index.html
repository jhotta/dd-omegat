

<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Azure WindowsへDatadog Agentのインストール</title>
    

    <meta itemprop="description" name="description" property="og:description" content="" />

    <link href="//fonts.googleapis.com/css?family=Open+Sans:700" rel="stylesheet" type="text/css">
    <link href="/static/css/bootstrap3-cbdde23cd71.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/tipuesearch.css">
    <link href="/static/css/style-cba6fad8d5d.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/pygments.css" media="screen">


    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>


    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-21102638-5']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <script src="https://use.fontawesome.com/700fac0342.js"></script>
    
  </head>

  <body>
    <!-- HEADER -->
<div class="navbar navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#topmenu" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand " href="/ja/">
        <img src="/static/dd_docs_logo.png">
      </a>
    </div>
    <div class="collapse navbar-collapse" id="topmenu">
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">ガイド <span class="caret"></span></a>
          <ul class="dropdown-menu">
          
            
              <li>
                <a href="/ja/overview/">Datadogが提供するサービスの概要</a>
              </li>
              
              <li>
                <a href="/ja/guides/basic_agent_usage/">Datadog Agent 入門</a>
              </li>
              
              <li>
                <a href="/ja/guides/metrics/">DogStatsD を使った、メトリクスの送信</a>
              </li>
              
              <li>
                <a href="/ja/guides/logs/">Datadog Agent によるログの解析方法</a>
              </li>
              
              <li>
                <a href="/ja/guides/hostmap/">Host Map表示の入門</a>
              </li>
              
              <li>
                <a href="/ja/guides/agent_checks/">Agent Checkの書き方</a>
              </li>
              
              <li>
                <a href="/ja/guides/azure/">Azure WindowsへDatadog Agentのインストール</a>
              </li>
              
              <li>
                <a href="/ja/guides/monitors/">Monitor(監視)機能の設定ガイド</a>
              </li>
              
              <li>
                <a href="/ja/guides/templating/">ダッシュボードのテンプレートの作成方法</a>
              </li>
              
              <li>
                <a href="/ja/guides/eventsemail/">メールによるイベント情報の送信</a>
              </li>
              
          </ul>
        </li>
        <li class="dropdown">
          <a id="nav-reference-dropdown" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">レファレンス <b class="caret"></b></a>
          <ul class="dropdown-menu dropdown-menu-left" role="menu" aria-labelledby="nav-guide-dropdown">
            <li><a href="/ja/api/">APIレファレンス</a></li>
            <li><a href="/ja/tracing/">Tracing (APM)</a></li>
            <li><a href="/ja/libraries/">APIライブラリー</a></li>
            <li><a href="/ja/monitoring/">アラート設定</a></li>
            <li><a href="/ja/graphing/">グラフ表示入門</a></li>
            <li><a href="/graphingjson/">JSONを使ったグラフの設定</a></li>
            <li><a href="/ja/hostnames/">ホスト名について</a></li>
            <li><a href="/ja/integrations/">インテグレーション</a></li>
            <li><a href="/ja/guides/dogstatsd/">DogStatsDの解説</a></li>
            <li><a href="/ja/examples/">サンプルコード</a></li>
            <li><a href="/ja/videos/">ビデオ</a></li>
            <li><a href="/ja/guides/billing/">課金に関するFAQ</a></li>
            <li><a href="/ja/faq/">FAQ</a></li>
          </ul>
        </li>
        
        <li><a href="/ja/help/">お問い合わせ</a></li>
        <li id="signin">
          <a class="btn navbar-btn flexbutton blueflex" href="https://app.datadoghq.com/signup">無料体験</a>
        </li>
        <li id="signup">
          <a class="btn navbar-btn flexbutton" href="https://help.datadoghq.com/hc/en-us/signin?return_to=https%3A%2F%2Fhelp.datadoghq.com%2Fhc%2Fen-us&locale=1">サポートログイン</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<!-- END HEADER -->

    <div class="container">
      <div class="row">
      
        <!-- SIDEBAR -->
        <div class="col-sm-3 col-md-3 hidden-xs hidden-print" id="sidebarcolumn">
          <ul class="nav nav-tabs nav-stacked sidebar">
          
            <li class='nav-header'>Table of Contents</li><li><a style='' href='#datadog-agent' onclick="$('#').collapse('show')">
インスタンスの起動時にDatadog Agentをインストールする</a></li><li><a style='' href='#section' onclick="$('#').collapse('show')">
アプリケーションのデプロイ</a></li>
            
            
              <li class="nav-header">ガイド </li>
              
              
                <li><a href="/ja/overview/">Datadogが提供するサービスの概要</a></li>
              
                <li><a href="/ja/guides/basic_agent_usage/">Datadog Agent 入門</a></li>
              
                <li><a href="/ja/guides/metrics/">DogStatsD を使った、メトリクスの送信</a></li>
              
                <li><a href="/ja/guides/logs/">Datadog Agent によるログの解析方法</a></li>
              
                <li><a href="/ja/guides/hostmap/">Host Map表示の入門</a></li>
              
                <li><a href="/ja/guides/agent_checks/">Agent Checkの書き方</a></li>
              
                <li><a href="/ja/guides/azure/">Azure WindowsへDatadog Agentのインストール</a></li>
              
                <li><a href="/ja/guides/monitors/">Monitor(監視)機能の設定ガイド</a></li>
              
                <li><a href="/ja/guides/templating/">ダッシュボードのテンプレートの作成方法</a></li>
              
                <li><a href="/ja/guides/eventsemail/">メールによるイベント情報の送信</a></li>
              
            
          </ul>
        &nbsp;
        </div>
        <!-- END SIDEBAR -->
        
        <!-- MAIN -->
        <div class="col-xs-12 col-sm-9 col-md-9 main">
          <!-- PAGE TITLE -->
          
          <h1 id="pagetitle">Azure WindowsへDatadog Agentのインストール </h1>
          
          
          <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!-- This guide assumes you are deploying an Azure Cloud Service.
Also, at the moment, the Agent install requires .net framework 2.0 or 3.5. --><html><body>
<p>このガイドは、Azure Cloud Serviceにデプロイしてることを仮定しています。
現時点では、Datadog Agentのインストールには、.NET Framework 2.0か3.5が必要です。</p>

<!-- ### Install the Agent on instance startup

**Create** a file called `installDatadogAgent.cmd` with the following contents: -->

<h3 id="datadog-agent" class="linked-header">
<a class="header-link" href="#datadog-agent"><i class="fa fa-link"></i></a>インスタンスの起動時にDatadog Agentをインストールする</h3>

<p>以下の内容でinstallDatadogAgent.cmdという名前のファイルを作成します:</p>

<pre><code>set log=datadog-install.log
set api_key=%1

sc query | findstr DatadogAgent
if ERRORLEVEL 1 (
    echo "Datadog Agent service not detected" &gt;&gt; %log%
    echo "Starting the installation" &gt;&gt; %log%
    reg query "HKLM\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5"| findstr /c:"Install    REG_DWORD    0x1"

    if ERRORLEVEL 1 (
        echo "Installing .NET 3.5" &gt;&gt; %log%
        powershell -Command "Import-Module ServerManager;Add-WindowsFeature -Name 'Net-Framework-Core'"
    ) else (
        echo ".NET 3.5 already installed" &gt;&gt; %log%
    )

    if exist ddagent.msi (
        echo "Already has the installer" &gt;&gt; %log%
    ) else (
        echo "Fetching the Agent Installer" &gt;&gt; %log%
        powershell -Command "(New-Object System.Net.WebClient).DownloadFile('https://s3.amazonaws.com/ddagent-windows-stable/ddagent-cli.msi', 'ddagent.msi')"
    )

    echo "Starting the installer" &gt;&gt;%log%
    msiexec.exe /qn /i ddagent.msi APIKEY=%api_key% /L+ %log%
) else (
    echo "Agent already exists, skipping install" &gt;&gt;%log%
)

echo "Finished Install" &gt;&gt;%log%
exit 0
</code></pre>

<!-- If you are using Visual Studio, make sure that the file is included in the package: Set the *Copy to Output Directory* property of the file to *Copy Always* and make sure that the *Build Action* is *Content* . -->

<p>Visual Studioを使用している場合は、このファイルがパッケージに含まれていることを確認してください。
また、このファイルの<em>Copy to Output Directory</em>プロパティーを<em>Copy Always</em>に設定し、<em>Build Action</em>を<em>Content</em>にしてください。</p>

<!-- **Add** the installation task to your `ServiceDefinition.csdef` file by adding the following in the `<Startup>` section: -->

<p><code>ServiceDefinition.csdef</code>ファイルの<code>&lt;Startup&gt;</code>セクションに、次の部分を追記することによって、インストールタスクを追加します:</p>

<pre><code>&lt;Task commandLine="installDatadogAgent.cmdi YOUR_API_KEY" executionContext="elevated" /&gt;
</code></pre>

<!-- Be sure to replace `YOUR_API_KEY` with your API key found at [here](https://app.datadoghq.com/account/settings#api).

The created file will download and install the latest version of the Agent on application deploy. -->

<p><code>YOUR_API_KEY</code>の部分は、Datadogのダッシュボードから<a href="https://app.datadoghq.com/account/settings#api">API key</a>を取得し、置き換えてください。</p>

<p>ここで作成したファイルにより、アプリケーションデプロイで最新バージョンのDatadog Agentがインストールされます。</p>

<h3 id="section" class="linked-header">
<a class="header-link" href="#section"><i class="fa fa-link"></i></a>アプリケーションのデプロイ</h3>

<!-- You should now repackage your app's cloud service package file (*.cspkg), making sure to include the `installDatadogAgent.cmd` file in the package.
You can also directly upload from Visual Studio using the `Publish` button.

On deploy you should see your new hosts appear on your infrastructure overview: -->

<p>ここで、アプリケーションのcloud service packageファイル(*.cspkg)を再パッケージします。
その際、<code>installDatadogAgent.cmd</code>ファイルが含まれていることを確認しておいてください。
更に、Visual Studioの<code>Publish</code>ボタンを押し、直接Datadog Agentをアップロードすることもできます。</p>

<p>デプロイが終われば、Datadogダッシュボードの<code>Ingrastractures</code>タブから表示されるホストリストに新しいホストが加わっているはずです:</p>

<p><img src="/static/images/azure_infrastructure_overview.png" alt="infrastructure view"></p>
</body></html>


          
        </div>
      </div>
    </div>
    <div class="container">
  <div class="row" id="footer">
    <div class=".col-md-12">お困りの場合は、 <a href="/ja/help/">お気軽にお声がけ下さい。</a> &bull; ドキュメント内の不備を見つけた場合は、 <a href="https://github.com/DataDog/documentation/issues">ご連絡を頂けると助かります。</a></div>
    <div class=".col-md-12"><a href="/">Read the docs in English</a></div>
    <div class=".col-md-12">&copy; Datadog, Inc. All rights reserved.</div>
  </div>
</div>

    

        <script type="text/javascript">
      ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];
      p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)
      };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;
      n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","https://don08600y3gfm.cloudfront.net/ps3b/static/js/plow232.js","snowplow"));
      window.snowplow('newTracker', 'co', 'collector.datadoghq.com', { // Initialise a tracker
      appId: 'datadog', // Application ID. Make sure you use the same value across all the tags you fire on your trial
      platform: 'web',
      cookieDomain: '.datadoghq.com',
      contexts: {
        performanceTiming: true,
        webPage: true
        }
      });
      window.snowplow('enableActivityTracking', 5, 5); // Ping every 30 seconds after 30 seconds
      window.snowplow('enableLinkClickTracking');
      window.snowplow('trackPageView');
    </script>

        <script type="text/javascript">
      (function() {
       var didInit = false;
       function initMunchkin() {
         if(didInit === false) {
           didInit = true;
           Munchkin.init('875-UVY-685');
         }
       }
       var s = document.createElement('script');
       s.type = 'text/javascript';
       s.async = true;
       s.src = '//munchkin.marketo.net/munchkin.js';
       s.onreadystatechange = function() {
         if (this.readyState == 'complete' || this.readyState == 'loaded') {
           initMunchkin();
         }
       };
       s.onload = initMunchkin;
       document.getElementsByTagName('head')[0].appendChild(s);
      })();
    </script>


    <!-- <script src="/static/jquery-1.7.2.min.js"></script> -->
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch-set.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch_content.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch.js"></script>
<script src="/static/datadog-docs.js"></script>


    <!-- No page Javascript -->
  </body>
</html>


