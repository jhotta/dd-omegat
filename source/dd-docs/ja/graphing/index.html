

<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>グラフ表示入門</title>
    

    <meta itemprop="description" name="description" property="og:description" content="" />

    <link href="//fonts.googleapis.com/css?family=Open+Sans:700" rel="stylesheet" type="text/css">
    <link href="/static/css/bootstrap3-cbdde23cd71.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/tipuesearch.css">
    <link href="/static/css/style-cba6fad8d5d.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/pygments.css" media="screen">


    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>


    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-21102638-5']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <script src="https://use.fontawesome.com/700fac0342.js"></script>
    
  </head>

  <body>
    <!-- HEADER -->
<div class="navbar navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#topmenu" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand " href="/ja/">
        <img src="/static/dd_docs_logo.png">
      </a>
    </div>
    <div class="collapse navbar-collapse" id="topmenu">
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">ガイド <span class="caret"></span></a>
          <ul class="dropdown-menu">
          
            
              <li>
                <a href="/ja/overview/">Datadogが提供するサービスの概要</a>
              </li>
              
              <li>
                <a href="/ja/guides/basic_agent_usage/">Datadog Agent 入門</a>
              </li>
              
              <li>
                <a href="/ja/guides/metrics/">DogStatsD を使った、メトリクスの送信</a>
              </li>
              
              <li>
                <a href="/ja/guides/logs/">Datadog Agent によるログの解析方法</a>
              </li>
              
              <li>
                <a href="/ja/guides/hostmap/">Host Map表示の入門</a>
              </li>
              
              <li>
                <a href="/ja/guides/agent_checks/">Agent Checkの書き方</a>
              </li>
              
              <li>
                <a href="/ja/guides/azure/">Azure WindowsへDatadog Agentのインストール</a>
              </li>
              
              <li>
                <a href="/ja/guides/monitors/">Monitor(監視)機能の設定ガイド</a>
              </li>
              
              <li>
                <a href="/ja/guides/templating/">ダッシュボードのテンプレートの作成方法</a>
              </li>
              
              <li>
                <a href="/ja/guides/eventsemail/">メールによるイベント情報の送信</a>
              </li>
              
          </ul>
        </li>
        <li class="dropdown">
          <a id="nav-reference-dropdown" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">レファレンス <b class="caret"></b></a>
          <ul class="dropdown-menu dropdown-menu-left" role="menu" aria-labelledby="nav-guide-dropdown">
            <li><a href="/ja/api/">APIレファレンス</a></li>
            <li><a href="/ja/tracing/">Tracing (APM)</a></li>
            <li><a href="/ja/libraries/">APIライブラリー</a></li>
            <li><a href="/ja/monitoring/">アラート設定</a></li>
            <li><a href="/ja/graphing/">グラフ表示入門</a></li>
            <li><a href="/graphingjson/">JSONを使ったグラフの設定</a></li>
            <li><a href="/ja/hostnames/">ホスト名について</a></li>
            <li><a href="/ja/integrations/">インテグレーション</a></li>
            <li><a href="/ja/guides/dogstatsd/">DogStatsDの解説</a></li>
            <li><a href="/ja/examples/">サンプルコード</a></li>
            <li><a href="/ja/videos/">ビデオ</a></li>
            <li><a href="/ja/guides/billing/">課金に関するFAQ</a></li>
            <li><a href="/ja/faq/">FAQ</a></li>
          </ul>
        </li>
        
        <li><a href="/ja/help/">お問い合わせ</a></li>
        <li id="signin">
          <a class="btn navbar-btn flexbutton blueflex" href="https://app.datadoghq.com/signup">無料体験</a>
        </li>
        <li id="signup">
          <a class="btn navbar-btn flexbutton" href="https://help.datadoghq.com/hc/en-us/signin?return_to=https%3A%2F%2Fhelp.datadoghq.com%2Fhc%2Fen-us&locale=1">サポートログイン</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<!-- END HEADER -->

    <div class="container">
      <div class="row">
      
        <!-- SIDEBAR -->
        <div class="col-sm-3 col-md-3 hidden-xs hidden-print" id="sidebarcolumn">
          <ul class="nav nav-tabs nav-stacked sidebar">
          
            <li class='nav-header'>Table of Contents</li><li><a style='' href='#editor' onclick="$('#').collapse('show')">
グラフエディターの使用</a></li><li><a style='' href='#gui' onclick="$('#').collapse('show')">
GUIエディターを使用したグラフ表示</a></li><li><a style='padding: 5px 25px;' href='#section' onclick="$('#').collapse('show')">
1) グラフ表示するメトリクスの選択</a></li><li><a style='padding: 5px 25px;' href='#section-1' onclick="$('#').collapse('show')">
2) メトリクスを可視化するグラフ形式の選択</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#timeseries-' onclick="$('#').collapse('show')">
Timeseries (時系列データのグラフ)</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#heatmap-' onclick="$('#').collapse('show')">
Heatmap (時系列の分布図グラフ)</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#distribution-' onclick="$('#').collapse('show')">
Distribution (分布図グラフ)</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#toplist-' onclick="$('#').collapse('show')">
Toplist (メトリクスのランキング)</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#change-' onclick="$('#').collapse('show')">
Change (メトリクスの変化量グラフ)</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#hostmap' onclick="$('#').collapse('show')">
Hostmap</a></li><li><a style='' href='#section-2' onclick="$('#').collapse('show')">
3) 指定したグラフ表示をフィルタと集計方法の設定で最適化する</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#section-3' onclick="$('#').collapse('show')">
フィルタ</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#section-4' onclick="$('#').collapse('show')">
集計の算出方法</a></li><li><a style='padding: 3px 35px;font-size:13px;' href='#section-5' onclick="$('#').collapse('show')">
集計のグループ指定</a></li><li><a style='padding: 5px 25px;' href='#section-6' onclick="$('#').collapse('show')">
4) メトリクスの値のロールアップ(値を丸める)</a></li><li><a style='padding: 5px 25px;' href='#section-7' onclick="$('#').collapse('show')">
5) 上級者向けの関数の適用</a></li><li><a style='padding: 5px 25px;' href='#section-8' onclick="$('#').collapse('show')">
6) メトリクスのグラフ表示にイベントを重ねあわせる</a></li><li><a style='padding: 5px 25px;' href='#section-9' onclick="$('#').collapse('show')">
7) タイトルの入力</a></li><li><a style='padding: 5px 25px;' href='#section-10' onclick="$('#').collapse('show')">
8) 保存</a></li>
            
            
              <li class="nav-header">ガイド </li>
              
              
                <li><a href="/ja/overview/">Datadogが提供するサービスの概要</a></li>
              
                <li><a href="/ja/guides/basic_agent_usage/">Datadog Agent 入門</a></li>
              
                <li><a href="/ja/guides/metrics/">DogStatsD を使った、メトリクスの送信</a></li>
              
                <li><a href="/ja/guides/logs/">Datadog Agent によるログの解析方法</a></li>
              
                <li><a href="/ja/guides/hostmap/">Host Map表示の入門</a></li>
              
                <li><a href="/ja/guides/agent_checks/">Agent Checkの書き方</a></li>
              
                <li><a href="/ja/guides/azure/">Azure WindowsへDatadog Agentのインストール</a></li>
              
                <li><a href="/ja/guides/monitors/">Monitor(監視)機能の設定ガイド</a></li>
              
                <li><a href="/ja/guides/templating/">ダッシュボードのテンプレートの作成方法</a></li>
              
                <li><a href="/ja/guides/eventsemail/">メールによるイベント情報の送信</a></li>
              
            
          </ul>
        &nbsp;
        </div>
        <!-- END SIDEBAR -->
        
        <!-- MAIN -->
        <div class="col-xs-12 col-sm-9 col-md-9 main">
          <!-- PAGE TITLE -->
          
          <h1 id="pagetitle">グラフ表示入門 </h1>
          
          
          <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!--
There are two ways to interact with the Graphing Editor: using the GUI (the default method) and writing JSON (the more complete method). This page covers using the GUI. To learn more about using JSON, visit the [JSON Graphing Primer Page](/graphingjson)
--><html><body>
<p>グラフエディターの設定には、GUI(デフォルトの手法)とJSON形式(より完全な手法)の2種類があります。このページではGUIエディターでの設定について説明します。JSON形式を使用したより詳しい設定に関しては、<a href="/ja/graphingjson">JSONを使用したグラフ表示入門</a>を参照して下さい。</p>

<!--
## Find the Graph Editor
{: #editor}

On each graph you will find a pencil icon that opens the graph editor.

![Graphing Overview](/static/images/references-graphing-overview.png)

The graph editor has three tabs, **Share**, **JSON**, and **Edit**. **Share** will allow you to embed the graph on any external web page. **JSON** is the more flexible editor, but it requires knowledge of the graph definition language to make use of it. **Edit** is the default tab and will allow you to use a GUI to select the graphing options. The newest features are sometimes only available on the **JSON** tab.
 -->

<h2 id="editor" class="linked-header">
<a class="header-link" href="#editor"><i class="fa fa-link"></i></a>グラフエディターの使用</h2>

<p>グラフを開くと右上隅に鉛筆マークがあります。このマークをクリックするとグラフエディターがポップアップします。</p>

<p><img src="/static/images/references-graphing-overview.png" alt="Graphing Overview"></p>

<p>グラフエディターには<strong>Share</strong>, <strong>JSON</strong>, <strong>Edit</strong>の3つのタブがあります。 <strong>Share</strong>タブでは、グラフを外部のwebページに挿入するためのコードを取得可能です。　<strong>JSON</strong>タブはより柔軟な設定が可能なエディターである一方、使用するにはグラフを定義する言語を理解しておく必要があります。 <strong>Edit</strong>はデフォルトのタブであり、グラフ表示のオプションをGUIから選択して設定することができます。最新の機能は <strong>JSON</strong>エディターでのみ使用できる場合があります。</p>

<!--
## Graphing with the graphical editor interface

When you first open the graph editor window, you will be on the **Edit** tab. Here you can use the UI to choose most settings to tweak your graphs. Here is an example of what you might see. This example comes from the first graph in the standard Postgres Integration dashboard:

![Graphing Edit Tab](/static/images/references-graphing-edit-window.png)

Configuring a graph in a dashboard is a multi-step process. The first two steps depend
-->

<h2 id="gui" class="linked-header">
<a class="header-link" href="#gui"><i class="fa fa-link"></i></a>GUIエディターを使用したグラフ表示</h2>

<p>グラフエディターウィンドウを開くと、最初は<strong>Edit</strong>タブがセットされています。このインターフェイスでグラフをあれこれ操作するほとんどの設定が選択できます。以下は、一般的なPostgresインテグレーションダッシュボードでのグラフの例です:</p>

<p><img src="/static/images/references-graphing-edit-window.png" alt="Graphing Edit Tab"></p>

<p>ダッシュボードの中でグラフを操作するにはいくつかのステップがあります。</p>

<!--
### 1) Choose the Metric to graph

When you create a graph, you will probably have a metric in mind that you want to show. You can select that in the first dropdown in the **Choose metrics and events** section. If you aren't sure exactly which metric to use, you might want to start with the [Metrics Explorer](https://app.datadoghq.com/metric/explorer). You can also look in the [Metrics Summary](https://app.datadoghq.com/metric/summary).

The Metrics Explorer will allow you to play around with different graph settings in a more ad-hoc way. The Metrics Summary will allow to learn more about the type of metric as well as setting the default unit for a metric.
-->

<h3 id="section" class="linked-header">
<a class="header-link" href="#section"><i class="fa fa-link"></i></a>1) グラフ表示するメトリクスの選択</h3>

<p>グラフを作成するにあたり、グラフ表示したいメトリクスが既に決まっているかもしれません。それならば、さっそくそのメトリクスを<strong>Choose metrics and events</strong> セクションの最初のドロップダウンボックスから選択します。もしそうではなく、どのメトリクスをグラフ表示すべきか分からないのであれば、メトリクスエクスプローラ<a href="https://app.datadoghq.com/metric/explorer">Metrics Explorer</a>を利用してみると良いでしょう。あるいは、メトリクスサマリ<a href="https://app.datadoghq.com/metric/summary">Metrics Summary</a>を見ることもできます。</p>

<p>メトリクスエクスプローラはさまざまなグラフ表示の設定をアドホックに簡単に試して見てみることができます。メトリクスサマリページでは、各メトリクスの単位やメトリクスのタイプなどをリストから確認することができます。</p>

<!--
### 2) Select your visualization

Once you have a metric in mind to display in your graph, select your visualization.
-->

<h3 id="section-1" class="linked-header">
<a class="header-link" href="#section-1"><i class="fa fa-link"></i></a>2) メトリクスを可視化するグラフ形式の選択</h3>

<p>グラフ表示するメトリクスが決まったら、次はメトリクスを可視化するグラフ形式を選択します。</p>

<!--
#### Timeseries

The Timeseries visualization is great for showing one or more metrics over time. The time window depends on what is selected on the timeboard or in the graph on a screenboard. Timeseries' can be displayed as lines, areas, and bars. To see an example of a timeseries graph, [click here](#collapseTimeseries){: role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseTimeseries" }. Timeseries is available on both timeboards and screenboards.

<div class="collapse" id="collapseTimeseries" markdown="1">
  ![Timeseries](/static/images/references-graphing-timeseries-example.png)
</div>
-->

<h4 id="timeseries-" class="linked-header">
<a class="header-link" href="#timeseries-"><i class="fa fa-link"></i></a>Timeseries (時系列データのグラフ)</h4>

<p>Timeseriesグラフは1つまたは複数のメトリクスの時間推移を可視化するのに最適です。グラフ表示する時間の幅は、タイムボード上の設定あるいはスクリーンボードでの各グラフの設定によって決まります。Timeseriesグラフの表示はlines(折れ線グラフ), areas(面グラフ), bars(棒グラフ)を選択できます。Timeseriesグラフの例を見るには、<a href="#collapseTimeseries" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseTimeseries">ここをクリック</a>. Timeseriesグラフはタイムボードとスクリーンボードの両方で利用することができます。</p>

<div class="collapse" id="collapseTimeseries">
  <p><img src="/static/images/references-graphing-timeseries-example.png" alt="Timeseries"></p>
</div>

<!--
#### Heatmap

The Heatmap visualization is great for showing metrics aggregated across many tags, such as *hosts*. The more hosts that have a particular value, the darker that square will be. To see an example of a heatmap, [click here](#collapseHeatmap){: role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseHeatmap" }. Heatmap is available on both timeboards and screenboards.

<div class="collapse" id="collapseHeatmap" markdown="1">
  ![Heatmap](/static/images/references-graphing-heatmap-example.png)
</div>
-->

<h4 id="heatmap-" class="linked-header">
<a class="header-link" href="#heatmap-"><i class="fa fa-link"></i></a>Heatmap (時系列の分布図グラフ)</h4>

<p>Heatmapグラフは多くのタグで集計されたメトリクス(例えば,<em>hosts</em> )を可視化するのに最適です。 ホストから得られたメトリクスで値が多く分布しているほど、その値の部分は濃い色を示します。Heatmapグラフの例を見るには、<a href="#collapseHeatmap" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseHeatmap">ここをクリック</a>. Heatmapグラフはタイムボードとスクリーンボードの両方で利用することができます。</p>

<div class="collapse" id="collapseHeatmap">
  <p><img src="/static/images/references-graphing-heatmap-example.png" alt="Heatmap"></p>
</div>

<!--
#### Distribution

The Distribution visualization is another way of showing metrics aggregated across many tags, such as *hosts*. Unlike the Heatmap, Distribution's x-axis is the quantity rather than time. To see an example of a distribution graph, [click here](#collapseDistribution){: role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseDistribution" }. Distribution is available on both timeboards and screenboards.

<div class="collapse" id="collapseDistribution" markdown="1">
  ![Distribution](/static/images/references-graphing-distribution-example.png)
</div>
-->

<h4 id="distribution-" class="linked-header">
<a class="header-link" href="#distribution-"><i class="fa fa-link"></i></a>Distribution (分布図グラフ)</h4>

<p>Distributionグラフは多くのタグで集計されたメトリクスを可視化するもう一つの方法です。Heatmapグラフとは異なり、DistributionグラフのX軸は時間ではなくメトリクスの値になり、Y軸はその分布の度数を示します。Distributionグラフの例は、<a href="#collapseDistribution" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseDistribution">ここをクリック</a>. Distributionグラフはタイムボードとスクリーンボードの両方で利用することができます。</p>

<div class="collapse" id="collapseDistribution">
  <p><img src="/static/images/references-graphing-distribution-example.png" alt="Distribution"></p>
</div>

<!--
#### Toplist

The Toplist visualization is perfect when you want to see the list of hosts with the most or least of any metric value, such as highest consumers of CPU, hosts with the least disk space, etc. To see an example of a Toplist,  [click here](#collapseTopList){: role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseTopList" }. Toplist is available on both timeboards and screenboards.

<div class="collapse" id="collapseTopList" markdown="1">
  ![TopList](/static/images/references-graphing-toplist-example.png)
</div>
-->

<h4 id="toplist-" class="linked-header">
<a class="header-link" href="#toplist-"><i class="fa fa-link"></i></a>Toplist (メトリクスのランキング)</h4>

<p>Toplistグラフは、CPU消費の高い順、残ディスク容量の少ない順、などホスト毎のメトリクスの値を大きいものあるいは小さいものから順に並べてリストしたい場合に最適です。Toplistのグラフの例を見るには,  <a href="#collapseTopList" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseTopList">ここをクリック</a>. Toplistグラフはタイムボードとスクリーンボードの両方で利用することができます。</p>

<div class="collapse" id="collapseTopList">
  <p><img src="/static/images/references-graphing-toplist-example.png" alt="TopList"></p>
</div>

<!--
#### Change

The Change graph will show you the change in a value over the time period chosen. To see an example of a Change graph, [click here](#collapseChangegraph){: role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseChangegraph" }.

<div class="collapse" id="collapseChangegraph" markdown="1">
  ![Changegraph](/static/images/references-graphing-change-example.png)
</div>
-->

<h4 id="change-" class="linked-header">
<a class="header-link" href="#change-"><i class="fa fa-link"></i></a>Change (メトリクスの変化量グラフ)</h4>

<p>Changeグラフは指定した時間枠でのメトリクスの変化量を可視化することができます。Changeグラフの例を見るには、<a href="#collapseChangegraph" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseChangegraph">ここをクリック</a>.</p>

<div class="collapse" id="collapseChangegraph">
  <p><img src="/static/images/references-graphing-change-example.png" alt="Changegraph"></p>
</div>

<h4 id="hostmap" class="linked-header">
<a class="header-link" href="#hostmap"><i class="fa fa-link"></i></a>Hostmap</h4>
<!--
The Hostmap will graph any metric for any subset of hosts on the same hostmap visualization available from the main Infrastructure Hostmap menu. To see an example of a Hostmap, [click here](#collapseHostmap){: role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseHostmap" }.

<div class="collapse" id="collapseHostmap" markdown="1">
  ![Hostmap](/static/images/references-graphing-hostmap-example.png)
</div>
-->
<p>Hostmapはメインメニューから利用できるHostmapと同様に、あらゆるメトリクスについて指定したホストのスコープで可視化することができます。Hostmapの例は、<a href="#collapseHostmap" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseHostmap">ここをクリック</a>.</p>

<div class="collapse" id="collapseHostmap">
  <p><img src="/static/images/references-graphing-hostmap-example.png" alt="Hostmap"></p>
</div>

<!--
### 3) Filter and Aggregate to show what you need

#### Filter

Now that you have the metric and a visualization in place, you can filter down the hosts to be graphed. To the right of the metric is a dropdown which by default says *(everywhere)*. Click this and choose the tag(s) you want to filter by. To learn more about tags, refer to the [Guide to Tagging](/guides/tagging/).
-->

<h2 id="section-2" class="linked-header">
<a class="header-link" href="#section-2"><i class="fa fa-link"></i></a>3) 指定したグラフ表示をフィルタと集計方法の設定で最適化する</h2>

<h4 id="section-3" class="linked-header">
<a class="header-link" href="#section-3"><i class="fa fa-link"></i></a>フィルタ</h4>

<p>メトリクスを可視化するグラフ表示の形式が決まったら、今度はフィルタ機能によってグラフ表示させたい特定のホストを抽出します。メトリクスを選択したボックスの右手に、<em>(everywhere)</em> とデフォルト表示されているドロップダウンボックスがあるので、そこから抽出したいホストが該当するタグ(複数可)を選択しましょう。なお、タグの詳細に関しては、<a href="/guides/tagging">Guide to Tagging</a> ページを参照して下さい。</p>

<!--
#### Aggregation Method

Next to the filter dropdown is the aggregation method. This defaults to **avg by** but can be changed to **max by**, **min by**, or **sum by**. In most cases, the metric will have many values for each time interval, coming from many hosts or instances. The aggregation method chosen determines how the metrics will be aggregated into a single line. So if you are graphing a metric that is from 100 hosts, **sum by** will add up all of those values and display the sum.
-->

<h4 id="section-4" class="linked-header">
<a class="header-link" href="#section-4"><i class="fa fa-link"></i></a>集計の算出方法</h4>

<p>フィルタの次は、集計の算出方法の設定です。デフォルトでは平均値をとる<strong>avg by</strong> が選択されていますが、ボックスをクリックすることで<strong>max by</strong>, <strong>min by</strong>, <strong>sum by</strong> も選択することができます。一定間隔で取得されているメトリクスの値には、複数のホストやインスタンスから集められた多様な値が存在していることが多く、ここで選択する集計方法によってそうした多様な値をどのように1つの値として集計するかを決定します。つまり、例えば100のホストからのメトリクスについてグラフ表示する場合、<strong>sum by</strong> を選択すると100ホストから取得しているメトリクスの合計値がグラフ表示されることになります。</p>

<!--
#### Aggregation Groups

After the aggregation method you can determine what constitutes a line or grouping in a graph. If you choose host, then you will have a line (in the case of line graphs) for each host. If you choose role, then there is a line for every role. Then that line will be made up of metrics from all the hosts in that role, aggregated using the method you chose above.
-->

<h4 id="section-5" class="linked-header">
<a class="header-link" href="#section-5"><i class="fa fa-link"></i></a>集計のグループ指定</h4>

<p>集計の算出方法を選択したら、今度はグラフの線1本1本の構成要素が何なのかを決めます。<code>host</code>を選択した場合は、それぞれのホストに対してグラフ線が表示されます。あるいはタグで定義している何らかのホストの<code>ロール</code>を選択した場合は、その各ロールに対してグラフ線が表示されます。<code>ロール</code>を選択した場合は複数のホストがロールごとにグループ化されてグラフ表示されるため、先に選択した<strong>集計の算出方法</strong> によってメトリクスの値が集計されグラフ表示されることになります。</p>

<!--
### 4) Rollup to aggregate over time

Regardless of the options chosen above, there will always be some aggregation of data due to the physical size constraints of the window holding the graph. If a metric is updated every second and you are looking at 4 hours of data, you will need 14,400 points to display everything. Each graph we display will have about 300 points shown at any given time.

In the example above, each point displayed on the screen represents 48 data points. In practice, metrics are collected by the agent every 15-20 seconds. So one day's worth of data is 4,320 data points. You might consider a rollup function that looks at 5 or 10 minutes worth of data if you would like to have more control over the display of your data for a graph that shows 1 day.
-->

<h3 id="section-6" class="linked-header">
<a class="header-link" href="#section-6"><i class="fa fa-link"></i></a>4) メトリクスの値のロールアップ(値を丸める)</h3>

<p>前述の集計方法の設定にかかわらず、グラフ表示画面の物理的な制約によって適用されているデータ集計の仕組みがあります。例えば、毎秒更新されるメトリクスについて4時間の時間幅でグラフ表示したい場合、すべてを表示するには14,400のデータポイントを表示する必要があります(60x60x4=14,400)。 一方で、各グラフはどのような時間幅を選んだ場合でも表示可能なのは約300データポイントまでです。</p>

<p>上記例では、画面上の単一のデータポイントは48のデータポイントを代表することになります(14,400÷300=
48)。他の例として、Datadog Agentによって20秒間隔で取得されているメトリクスの場合、1日で4,320のデータポイントが取得されます(24x60x60/20=4,320)。このメトリクスにおいて1日の時間幅でグラフ表示する場合は、5分や10分の間隔で値をロールアップされることも考慮しておくとよいでしょう。</p>

<!--
To use the rollup function, click the plus sign to the right of the aggregation group and choose rollup from the dropdown. Now choose how you want to aggregate the data and the interval in seconds.

To create a single line that represents the total available disk space on average across all machines rolled up in 60 seconds buckets, you would use a query like this:
-->
<p>ロールアップ関数を使う場合は、集計方法を設定したボックスの右手のプラスマークをクリックし、<code>Rollup</code>を選択します。そして算出方法でロールアップし、どれくらいの時間間隔でロールアップするかを指定します。</p>

<p>例えば、全てのマシンの利用可能なディスク容量の平均値をとり、そのメトリクスは60秒ごとの平均値としてロールアップしたグラフ表示をさせる場合には、以下のような指定します:</p>

<p><img src="/static/images/references-graphing-rollup-example.png" alt="rollup example"></p>

<!--
When switching to the JSON view, the query will look like this:

    "q": "avg:system.disk.free{*}.rollup(avg, 60)"

For more about using the JSON view, scroll to the bottom and click the Learn about the JSON tab link.
-->

<p>JSONエディターに切り替えると、以下のようなクエリとして記述されます:</p>

<pre><code>"q": "avg:system.disk.free{*}.rollup(avg, 60)"
</code></pre>

<p>JSON形式を使用したより詳しい設定に関しては、<a href="/ja/graphingjson">JSONを使用したグラフ表示入門</a>を参照して下さい。</p>

<!--
### 5) Apply more advanced functions

Depending on your analysis needs, you may choose to apply other mathematical functions to the query. Examples include rates and derivatives, smoothing, and more. For a list of available functions, [click here](#collapseGraphicFunctionTable){: role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseGraphicFunctionTable" }.
-->

<h3 id="section-7" class="linked-header">
<a class="header-link" href="#section-7"><i class="fa fa-link"></i></a>5) 上級者向けの関数の適用</h3>

<p>分析のニーズによっては、他の数値演算関数が必要なこともあるでしょう。変化量や微分、平滑化や回帰計算などがあります。利用可能な関数は、<a href="#collapseGraphicFunctionTable" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="collapseGraphicFunctionTable">ここをクリック</a>.</p>

<div class="collapse" id="collapseGraphicFunctionTable">
  <!-- The graphing functions section is a partial -->

  <table class="table">
    <thead>
      <tr>
        <th>Function</th>
        <th>Category</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>abs()</code></td>
        <td>Arithmetic</td>
        <td>absolute value</td>
      </tr>
      <tr>
        <td><code>log2()</code></td>
        <td>Arithmetic</td>
        <td>base-2 logarithm</td>
      </tr>
      <tr>
        <td><code>log10()</code></td>
        <td>Arithmetic</td>
        <td>base-10 logarithm</td>
      </tr>
      <tr>
        <td><code>cumsum()</code></td>
        <td>Arithmetic</td>
        <td>cumulative sum over visible time window</td>
      </tr>
      <tr>
        <td><code>integral()</code></td>
        <td>Arithmetic</td>
        <td>cumulative sum of ([time delta] x [value delta]) over all consecutive pairs of points in the visible time window</td>
      </tr>
      <tr>
        <td><code>.fill()</code></td>
        <td>Interpolation</td>
        <td>choose how to interpolate missing values</td>
      </tr>
      <tr>
        <td><code>hour_before()</code></td>
        <td>Timeshift</td>
        <td>metric values from one hour ago</td>
      </tr>
      <tr>
        <td><code>day_before()</code></td>
        <td>Timeshift</td>
        <td>metric values from one day ago</td>
      </tr>
      <tr>
        <td><code>week_before()</code></td>
        <td>Timeshift</td>
        <td>metric values from one week ago</td>
      </tr>
      <tr>
        <td><code>month_before()</code></td>
        <td>Timeshift</td>
        <td>metric values from one month ago</td>
      </tr>
      <tr>
        <td><code>per_second()</code></td>
        <td>Rate</td>
        <td>the rate at which the metric changes per second</td>
      </tr>
      <tr>
        <td><code>per_minute()</code></td>
        <td>Rate</td>
        <td>
<code>per_second()</code> * 60</td>
      </tr>
      <tr>
        <td><code>per_hour()</code></td>
        <td>Rate</td>
        <td>
<code>per_second()</code> * 3600</td>
      </tr>
      <tr>
        <td><code>dt()</code></td>
        <td>Rate</td>
        <td>time delta between points</td>
      </tr>
      <tr>
        <td><code>diff()</code></td>
        <td>Rate</td>
        <td>value delta between points</td>
      </tr>
      <tr>
        <td><code>derivative()</code></td>
        <td>Rate</td>
        <td>1st order derivative; <code>diff()</code> / <code>dt()</code>
</td>
      </tr>
      <tr>
        <td><code>ewma_3()</code></td>
        <td>Smoothing</td>
        <td>exponentially weighted moving average with a span of 3</td>
      </tr>
      <tr>
        <td><code>ewma_5()</code></td>
        <td>Smoothing</td>
        <td>EWMA with a span of 5</td>
      </tr>
      <tr>
        <td><code>ewma_10()</code></td>
        <td>Smoothing</td>
        <td>EWMA with a span of 10</td>
      </tr>
      <tr>
        <td><code>ewma_20()</code></td>
        <td>Smoothing</td>
        <td>EWMA with a span of 20</td>
      </tr>
      <tr>
        <td><code>median_3()</code></td>
        <td>Smoothing</td>
        <td>rolling median with a span of 3</td>
      </tr>
      <tr>
        <td><code>median_5()</code></td>
        <td>Smoothing</td>
        <td>rolling median with a span of 5</td>
      </tr>
      <tr>
        <td><code>median_7()</code></td>
        <td>Smoothing</td>
        <td>rolling median with a span of 7</td>
      </tr>
      <tr>
        <td><code>median_9()</code></td>
        <td>Smoothing</td>
        <td>rolling median with a span of 9</td>
      </tr>
      <tr>
        <td><code>.rollup()</code></td>
        <td>Rollup</td>
        <td>override default time aggregation type and time period; see the “Rollup” section below for details</td>
      </tr>
      <tr>
        <td><code>count_nonzero()</code></td>
        <td>Count</td>
        <td>count all the non-zero values</td>
      </tr>
      <tr>
        <td><code>count_not_null()</code></td>
        <td>Count</td>
        <td>count all the non-null values</td>
      </tr>
      <tr>
        <td><code>top()</code></td>
        <td>Rank</td>
        <td>select the top series responsive to a given query, according to some ranking method; see the “Top functions” section below for more details</td>
      </tr>
      <tr>
        <td><code>top_offset()</code></td>
        <td>Rank</td>
        <td>similar to <code>top()</code>, except with an additional offset parameter, which controls where in the ordered sequence of series the graphing starts. For example, an offset of 2 would start graphing at the number 3 ranked series, according to the chosen ranking metric.</td>
      </tr>
      <tr>
        <td><code>robust_trend()</code></td>
        <td>Regression</td>
        <td>fit a robust regression trend line using Huber loss; see the “Robust regression” section below for more details</td>
      </tr>
      <tr>
        <td><code>trend_line()</code></td>
        <td>Regression</td>
        <td>fit an ordinary least squares regression line through the metric values</td>
      </tr>
      <tr>
        <td><code>piecewise_constant()</code></td>
        <td>Regression</td>
        <td>approximate the metric with a piecewise function composed of constant-valued segments</td>
      </tr>
      <tr>
        <td><code>anomalies()</code></td>
        <td>Algorithms</td>
        <td>overlay a gray band showing the expected behavior of a series based on past behavior; see our <a href="/guides/anomalies">guide to anomaly detection</a>
</td>
      </tr>
      <tr>
        <td><code>outliers()</code></td>
        <td>Algorithms</td>
        <td>highlight outlier series; see our <a href="/guides/outliers">guide to outlier detection</a>
</td>
      </tr>
    </tbody>
  </table>

  <p><strong><code>.as_count()</code> &amp; <code>.as_rate()</code></strong></p>

  <p>These functions are only intended for metrics submitted as rates or counters via statsd. These functions will have no effect for other metric types. For more on details about how to use <code>.as_count()</code> and <code>.as_rate()</code> please see <a href="https://www.datadoghq.com/blog/visualize-statsd-metrics-counts-graphing/">our blog post</a>.</p>

  <p><strong>Rollup</strong></p>

  <p><code>.rollup()</code> is recommended for expert users only. Appending this function to the end of a query allows you to control the number of raw points rolled up into a single point plotted on the graph. The function takes two parameters, method and time: <code>.rollup(method,time)</code></p>

  <p>The method can be sum/min/max/count/avg and time is in seconds. You can use either one individually, or both together like <code>.rollup(sum,120)</code>. We impose a limit of 350 points per time range. For example, if you’re requesting <code>.rollup(20)</code> for a month-long window, we will return data at a rollup far greater than 20 seconds in order to prevent returning a gigantic number of points.</p>

  <p><strong>Top functions</strong></p>

  <ul>
    <li>a metric query string with some grouping, e.g. <code>avg:system.cpu.idle{*} by {host}</code>
</li>
    <li>the number of series to be displayed, as an integer.</li>
    <li>one of <code>'max'</code>, <code>'min'</code>, <code>'last'</code>, <code>'l2norm'</code>, or <code>'area'</code>.  <code>'area'</code> is the signed area under the curve being graphed, which can be negative.  <code>'l2norm'</code> uses the <a href="http://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm">L2 Norm</a> of the time series, which is always positive, to rank the series.</li>
    <li>either <code>'desc'</code> (rank the results in descending order) or <code>'asc'</code> (ascending order).</li>
  </ul>

  <p>The <code>top()</code> method also has convenience functions of the following form, all of which take a single series list as input:</p>

  <p><code>[top, bottom][5, 10, 15, 20]_[mean, min, max, last, area, l2norm]()</code></p>

  <p>For example, <code>bottom10_min()</code> retrieves lowest-valued 10 series using the ‘min’ metric.</p>

  <p><strong>Robust regression</strong></p>

  <p>The most common type of linear regression – ordinary least squares (OLS) – can be heavily influenced by a small number of points with extreme values. Robust regression is an alternative method for fitting a regression line; it is not influenced as strongly by a small number of extreme values. As an example, see the following plot.</p>

  <p><img src="/static/images/robust-trend.png" alt=""></p>

  <p>The original metric is shown as a solid blue line. The purple dashed line is an OLS regression line, and the yellow dashed line is a robust regression line. The one short-lived spike in the metric leads to the OLS regression line trending upward, but the robust regression line ignores the spike and does a better job fitting the overall trend in the metric.</p>

</div>

<!--
### 6) Overlay events for additional context

You can repeat all the steps above to add additional metrics to your graph to add context. You can also add events from related system to add even more context. So an example would be to add github commits, Jenkins deploys, or Docker creation events. Just click the Overlay Events button and enter a query to find and display your events. To show anything from a source such as Github, use ```sources:github```. For all the events with the tag role:web, use ```tag:role:web```.
-->

<h3 id="section-8" class="linked-header">
<a class="header-link" href="#section-8"><i class="fa fa-link"></i></a>6) メトリクスのグラフ表示にイベントを重ねあわせる</h3>

<p>より意味のあるグラフ表示のために、ここまでのステップを繰り返して他のメトリクスをグラフ表示に追加することができます。あるいはグラフ表示が意味する文脈をより豊かにするために、関連するシステムで生じたイベントについても表示を追加できます。たとえば、githubのコミット、Jenkinsのデプロイ、あるいはDockerのcreationイベントなどです。<code>Overlay Events</code>ボタンをクリックし、イベントをクエリする文字列を入力するだけです。例えば、Githubのすべてのイベントを重ねあわせるなら<code>sources:github</code>と入力します。タグ role:web を持つイベントについて重ねあわせるなら <code>tag:role:web</code>と入力します。</p>

<!--
### 7) Create a title

If you don't enter a title, we will automatically generate a title based on the selections you have made. But it may be more useful to the users of the dashboard to create a title that more aptly describes the purpose of the graph. Linking the technical purpose to the business benefits adds even more value.
-->

<h3 id="section-9" class="linked-header">
<a class="header-link" href="#section-9"><i class="fa fa-link"></i></a>7) タイトルの入力</h3>

<p>タイトルを指定しない場合、メトリクスやグラフ表示での指定をもとに自動でタイトルが入力されます。しかしより適切に表現されたタイトルは、ダッシュボード上に多数あるグラフの中で目的をユーザーに示すのに役立ちます。ここでビジネスに役立つ意味を表現するのも価値のあることです。</p>

<!--
### 8) Save

The final step is to click Save. You can always come back in to the editor and tweak the graph further depending on your needs.
-->

<h3 id="section-10" class="linked-header">
<a class="header-link" href="#section-10"><i class="fa fa-link"></i></a>8) 保存</h3>

<p>最後に<code>Save</code>をクリックし設定を保存します。保存後も、必要に応じていつでもグラフエディターから各設定を操作することができます。</p>
</body></html>


          
        </div>
      </div>
    </div>
    <div class="container">
  <div class="row" id="footer">
    <div class=".col-md-12">お困りの場合は、 <a href="/ja/help/">お気軽にお声がけ下さい。</a> &bull; ドキュメント内の不備を見つけた場合は、 <a href="https://github.com/DataDog/documentation/issues">ご連絡を頂けると助かります。</a></div>
    <div class=".col-md-12"><a href="/">Read the docs in English</a></div>
    <div class=".col-md-12">&copy; Datadog, Inc. All rights reserved.</div>
  </div>
</div>

    

        <script type="text/javascript">
      ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];
      p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)
      };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;
      n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","https://don08600y3gfm.cloudfront.net/ps3b/static/js/plow232.js","snowplow"));
      window.snowplow('newTracker', 'co', 'collector.datadoghq.com', { // Initialise a tracker
      appId: 'datadog', // Application ID. Make sure you use the same value across all the tags you fire on your trial
      platform: 'web',
      cookieDomain: '.datadoghq.com',
      contexts: {
        performanceTiming: true,
        webPage: true
        }
      });
      window.snowplow('enableActivityTracking', 5, 5); // Ping every 30 seconds after 30 seconds
      window.snowplow('enableLinkClickTracking');
      window.snowplow('trackPageView');
    </script>

        <script type="text/javascript">
      (function() {
       var didInit = false;
       function initMunchkin() {
         if(didInit === false) {
           didInit = true;
           Munchkin.init('875-UVY-685');
         }
       }
       var s = document.createElement('script');
       s.type = 'text/javascript';
       s.async = true;
       s.src = '//munchkin.marketo.net/munchkin.js';
       s.onreadystatechange = function() {
         if (this.readyState == 'complete' || this.readyState == 'loaded') {
           initMunchkin();
         }
       };
       s.onload = initMunchkin;
       document.getElementsByTagName('head')[0].appendChild(s);
      })();
    </script>


    <!-- <script src="/static/jquery-1.7.2.min.js"></script> -->
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch-set.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch_content.js"></script>
<script type="text/javascript" src="/tipuesearch/tipuesearch.js"></script>
<script src="/static/datadog-docs.js"></script>


    <!-- No page Javascript -->
  </body>
</html>


